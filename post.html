<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng tin - NDQRoomHub</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-home"></i>
                    <span>NDQ RoomHub</span>
                </div>
                <button class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <nav class="nav">
                    <a href="index.html">Trang chủ</a>
                    <a href="listing.html">Tìm phòng</a>
                    <a href="post.html" class="active">Đăng tin</a>
                    <a href="dashboard.html">Quản lý tin</a>
                </nav>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle" title="Chuyển đổi chế độ">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="btn-login" id="loginBtn">Đăng nhập</button>
                </div>
            </div>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1>Đăng Tin Cho Thuê</h1>
            <p>Đăng tin miễn phí để tiếp cận hàng nghìn khách hàng</p>
        </div>
    </section>

    <section class="post-section">
        <div class="container">
            <div class="post-form-wrapper">
                <form id="postForm" class="post-form">
                    <div class="form-section">
                        <h2>Thông tin cơ bản</h2>
                        
                        <div class="form-group">
                            <label for="postTitle">Tiêu đề tin đăng <span class="required">*</span></label>
                            <input type="text" id="postTitle" required placeholder="VD: Cho thuê phòng trọ giá rẻ Quận 1">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="postType">Loại hình <span class="required">*</span></label>
                                <select id="postType" required>
                                    <option value="">Chọn loại hình</option>
                                    <option value="Nhà trọ">Nhà trọ</option>
                                    <option value="Chung cư">Chung cư</option>
                                    <option value="Khách sạn">Khách sạn</option>
                                    <option value="Homestay">Homestay</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="postLocation">Khu vực <span class="required">*</span></label>
                                <select id="postLocation" required>
                                    <option value="">Chọn khu vực</option>
                                    <option value="Quận 1">Quận 1</option>
                                    <option value="Quận 2">Quận 2</option>
                                    <option value="Quận 3">Quận 3</option>
                                    <option value="Quận 4">Quận 4</option>
                                    <option value="Quận 5">Quận 5</option>
                                    <option value="Quận 7">Quận 7</option>
                                    <option value="Quận 10">Quận 10</option>
                                    <option value="Bình Thạnh">Bình Thạnh</option>
                                    <option value="Thủ Đức">Thủ Đức</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="postPrice">Giá thuê (VNĐ/tháng) <span class="required">*</span></label>
                                <input type="number" id="postPrice" required placeholder="3000000" min="0">
                            </div>

                            <div class="form-group">
                                <label for="postArea">Diện tích (m²) <span class="required">*</span></label>
                                <input type="number" id="postArea" required placeholder="25" min="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="postDescription">Mô tả chi tiết <span class="required">*</span></label>
                            <textarea id="postDescription" required rows="6" placeholder="Mô tả chi tiết về phòng, tiện ích, vị trí..."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Tiện ích</h2>
                        <div class="amenities-checkboxes">
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="WiFi miễn phí">
                                <span>WiFi miễn phí</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Điều hòa">
                                <span>Điều hòa</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Máy giặt">
                                <span>Máy giặt</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Tủ lạnh">
                                <span>Tủ lạnh</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Bãi đỗ xe">
                                <span>Bãi đỗ xe</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Thang máy">
                                <span>Thang máy</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Bảo vệ 24/7">
                                <span>Bảo vệ 24/7</span>
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="amenity" value="Nấu ăn">
                                <span>Cho phép nấu ăn</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Hình ảnh</h2>
                        <div class="form-group">
                            <label for="postImage">URL hình ảnh <span class="required">*</span></label>
                            <input type="url" id="postImage" required placeholder="https://example.com/image.jpg">
                            <small>Nhập URL hình ảnh phòng của bạn</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h2>Thông tin liên hệ</h2>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="postOwner">Tên người liên hệ <span class="required">*</span></label>
                                <input type="text" id="postOwner" required placeholder="Nguyễn Văn A">
                            </div>

                            <div class="form-group">
                                <label for="postPhone">Số điện thoại <span class="required">*</span></label>
                                <input type="tel" id="postPhone" required placeholder="0123456789">
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-preview" id="previewBtn">
                            <i class="fas fa-eye"></i> Xem trước
                        </button>
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Đăng tin
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2024 NDQ RoomHub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/data.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        if (currentTheme === 'dark') {
            body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const theme = body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('theme', theme);
            themeToggle.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        });

        // Login button
        document.getElementById('loginBtn').addEventListener('click', () => {
            window.location.href = 'login.html';
        });

        // Handle form submission
        document.getElementById('postForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Check if user is logged in
            if (!isLoggedIn()) {
                alert('Bạn cần đăng nhập để đăng tin!');
                window.location.href = 'login.html';
                return;
            }

            // Get form data
            const title = document.getElementById('postTitle').value;
            const type = document.getElementById('postType').value;
            const location = document.getElementById('postLocation').value;
            const price = parseInt(document.getElementById('postPrice').value);
            const area = parseInt(document.getElementById('postArea').value);
            const description = document.getElementById('postDescription').value;
            const image = document.getElementById('postImage').value;
            const owner = document.getElementById('postOwner').value;
            const phone = document.getElementById('postPhone').value;

            // Get selected amenities
            const amenities = [];
            document.querySelectorAll('input[name="amenity"]:checked').forEach(checkbox => {
                amenities.push(checkbox.value);
            });

            // Create new room object
            const newRoom = {
                id: Date.now(),
                title,
                type,
                location,
                price,
                area,
                description,
                image,
                owner,
                phone,
                amenities,
                date: new Date().toISOString(),
                views: 0
            };

            // Get existing rooms from localStorage
            let myPosts = JSON.parse(localStorage.getItem('myPosts') || '[]');
            myPosts.push(newRoom);
            localStorage.setItem('myPosts', JSON.stringify(myPosts));

            alert('Đăng tin thành công!');
            window.location.href = 'dashboard.html';
        });

        // Preview button
        document.getElementById('previewBtn').addEventListener('click', function() {
            alert('Chức năng xem trước đang được phát triển!');
        });
    </script>
</body>
</html>